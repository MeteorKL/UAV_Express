<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>UAV Express</title>
  <script type="text/javascript" src="/js/ajax.js"></script>
  <link rel="stylesheet" href="/css/stop_button.css" />
</head>

<body>
  <table class="stop"><tr>
    <td><div class="food"><img id="img0"/><div id="name0">xxx</div><div id="description0"></div><div><span>单价: </span><span id="price0">0.00</span></div><button onclick="buy(1)">购买</button></div></td>
    <td><div class="food"><img id="img1"/><div id="name1">xxx</div><div id="description1"></div><div><span>单价: </span><span id="price1">0.00</span></div><button onclick="buy(2)">购买</button></div></td>
    <td><div class="food"><img id="img2"/><div id="name2">xxx</div><div id="description2"></div><div><span>单价: </span><span id="price2">0.00</span></div><button onclick="buy(3)">购买</button></div></td>
    <td><div class="food"><img id="img3"/><div id="name3">xxx</div><div id="description3"></div><div><span>单价: </span><span id="price3">0.00</span></div><button onclick="buy(4)">购买</button></div></td>
    <td><div class="food"><img id="img4"/><div id="name4">xxx</div><div id="description4"></div><div><span>单价: </span><span id="price4">0.00</span></div><button onclick="buy(5)">购买</button></div></td>
    <td><div class="food"><img id="img5"/><div id="name5">xxx</div><div id="description5"></div><div><span>单价: </span><span id="price5">0.00</span></div><button onclick="buy(6)">购买</button></div></td>
  </tr></table>
  <script type="text/javascript">
    var url = window.location.pathname.split('/')
    var user_id = url[2]
    url = '/user/'+user_id+'/button'
    AjaxGet(url, (r) => {
      for (var id in r) {
        var item = r[id]
        document.getElementById('img'+id).src=item.item_img
        document.getElementById('name'+id).innerText=item.item_name
        document.getElementById('description'+id).innerText=item.item_description
        document.getElementById('price'+id).innerText=item.item_price.toFixed(2)
      }
    }, (e) => {
      console.error(e)
    })
    function buy(id) {
      url = '/user/'+user_id+'/stop/pay'
      query = 'id='+id
      AjaxPost(url, query, (r) => {
        console.log(r)
      }, (e) => {
        console.error(e)
      })
    }
  </script>
</body>

</html>